<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>{$title}</title>
		<link href="../../css/bootstrap.min.css" rel="stylesheet">
		<link href="../../font-awesome/css/font-awesome.css" rel="stylesheet">
		<!-- Toastr style -->
	  <link href="../../css/plugins/toastr/toastr.min.css" rel="stylesheet">
		<link href="../../css/animate.css" rel="stylesheet">
		<link href="../../css/style.css" rel="stylesheet">
		<base href="{$$base}">
	</head>
	<body>
		<div id="wrapper">
			<!--Главное меню слева-->
			{require "../../~section/mainmenu.html"}
			<!--Конец меню-->

			<div id="page-wrapper" class="gray-bg">

			<!-- Head menu -->
			{require "../../~section/head.html"}
			<!-- End head menu -->

			<!-- Менюшка title-->
			{require "../../~section/title.html"}
			<!-- конец title-->

				<div class="wrapper wrapper-content">
					<div class="row">
						<div class="col-lg-4 animated fadeInDown">





							<div class="ibox float-e-margins">
						<div class="ibox-title">
									 <h5>{$catalog['collection']['head']}</h5>
									 <div class="ibox-tools">
										  <a class="collapse-link">
												<i class="fa fa-chevron-up"></i>
										  </a>
										  <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
												<i class="fa fa-wrench"></i>
										  </a>
										  <ul class="dropdown-menu dropdown-user">
												<li><a target="_blank" href="admin/constructor/object/export">Экспортировать</a>
												</li>
												<li><a onclick="importObjects()">Импортировать</a>
												</li>
										  </ul>
<!--
										  <a class="close-link">
												<i class="fa fa-times"></i>
										  </a>
-->
									 </div>
								</div>


								<div class="ibox-content">
									<div class="file-manager">
<!--
										<h5>{$catalog['collection']['head']}</h5>
-->
										<!--
											<a href="#" class="file-control active">Ale</a>
											<a href="#" class="file-control">Documents</a>
											<a href="#" class="file-control">Audio</a>
											<a href="#" class="file-control">Images</a>
											-->
<!--
										<div class="hr-line-dashed"></div>
-->
										<form action="{$form['collection']['action']}" method='get'>
											<input name='collection' placeholder="Имя новой коллекции" class="form-control">
											<p></p>
											<button type="submit" class="btn btn-primary !btn-sm btn-outline btn-block">{$form['collection']['button']['add']['head']}</button>
										</form>
										<div class="hr-line-dashed"></div>
										<h5>{$catalog['collection']['info']}</h5>
										<ul class="folder-list" style="padding: 0">
											{foreach $catalog['collection']['list'] as $_value}
												<li {if $_value['active']} class='text-info' {end}>
												<a href="{$_value['link']}"><i class="{$_value['icon']}"></i>{$_value['head']}</a>
<!--
												<a href="{$_value['delete_link']}">
-->
<!--
													<button type="button" class="btn btn-warning btn-xs pull-right" data-link="{$_value['button']['delete']['link']}">{$_value['button']['delete']['head']}</button>
-->
													<button type="button" class="btn btn-delete-collection btn-warning btn-xs pull-right" data-head="{$_value['head']}" data-link="{$_value['button']['delete']['link']}"><span class="fa fa-trash"></span></button>
<!--
												</a>
-->
											</li>
											{end}
										</ul>
										<!--
											<ul class="folder-list" style="padding: 0">
												 <li><a href=""><i class="fa fa-th-list"></i> Files</a></li>
												 <li><a href=""><i class="fa fa-database"></i> Pictures</a></li>
												 <li><a href=""><i class="fa fa-database"></i> Web pages</a></li>
												 <li><a href=""><i class="fa fa-database"></i> Illustrations</a></li>
												 <li><a href=""><i class="fa fa-database"></i> Films</a></li>
												 <li><a href=""><i class="fa fa-database"></i> Books</a></li>
											</ul>
											-->
										<!--
											<h5 class="tag-title">Tags</h5>
											<ul class="tag-list" style="padding: 0">
												 <li><a href="">Family</a></li>
												 <li><a href="">Work</a></li>
												 <li><a href="">Home</a></li>
												 <li><a href="">Children</a></li>
												 <li><a href="">Holidays</a></li>
												 <li><a href="">Music</a></li>
												 <li><a href="">Photography</a></li>
												 <li><a href="">Film</a></li>
											</ul>
											-->
										<div class="clearfix"></div>
									</div>
								</div>
							</div>


<!--
							<div class="ibox float-e-margins">
						<div class="ibox-content">
							<div class="file-manager">
								<h5>{$catalog['tools']['head']}</h5>
								<div class="hr-line-dashed"></div>
								<form action="{$form['collection']['action']}" method='get'>
									<input name='collection' placeholder="Имя новой коллекции" class="form-control">
									<p></p>
									<button type="submit" class="btn btn-primary btn-block">{$form['collection']['button']['add']['head']}</button>
								</form>
								<div class="hr-line-dashed"></div>
								<button type="submit" class="btn btn-primary !btn-block">{$form['tools']['button']['export']['head']}</button>
								<button type="submit" class="btn btn-primary !btn-block">{$form['tools']['button']['import']['head']}</button>

								<div class="clearfix"></div>
							</div>
						</div>
					</div>
-->



						</div>

						<div class="col-lg-8 animated fadeInRight"  style="z-index:1">
							<div class="row">
								<div class="col-lg-12">
									<div class="ibox float-e-margins">
										<div class="ibox-title">
											<h5>{$catalog['objects']['head']}</h5>
											<a href='admin/constructor/object/edit'class="btn btn-primary btn-xs pull-right">{$catalog['objects']['button']['add']['head']}</a>
											<!--
												<div class="ibox-tools">
													<a class="collapse-link">
														<i class="fa fa-chevron-up"></i>
													</a>
													<a class="dropdown-toggle" data-toggle="dropdown" href="#">
														<i class="fa fa-wrench"></i>
													</a>
													<ul class="dropdown-menu dropdown-user">
														<li><a href="#">Создать новый элемент</a>
														</li>
														<li><a href="#">Удалить коллекцию</a>
														</li>
													</ul>
													<a class="close-link">
														<i class="fa fa-times"></i>
													</a>
												</div>
												-->
										</div>
										<div class="ibox-content">
											<table class="table table-striped table-bordered table-hover dataTables-example" >
												<thead>
													<tr>
														<th>Название объекта</th>
														<th class="col-lg-5"></th>
													</tr>
												</thead>
												<tbody>
													{foreach $catalog['objects']['list'] as $_value}
													<tr class="gradeA">
														<td><a class='text-primary !btn-block' {if $_value['link']} href="{$_value['link']}" {end}>{$_value['head']}</a></td>
														<td class='center'>
														{foreach ($_value['button']) as $_button}
															<a class="btn btn-white btn-xs" href="{$_button['link']}"><i class="fa {$_button['icon']}"></i> {$_button['head']}</a>
														{end}
<!--
											<a class="btn btn-white btn-xs" href="{$_value['edit']}">{$catalog['objects']['button']['edit']['head']}</a>
														  <a class="btn btn-warning btn-xs" href="{$_value['delete']}">{$catalog['objects']['button']['delete']['head']}</a>
-->
														</td>
													</tr>
													{end}
													<!--
														<tr class="gradeC">
															<td>Trident</td>
															<td>Internet
																Explorer 5.0
															</td>
														</tr>
														<tr class="gradeA">
															<td>Trident</td>
															<td>Internet
																Explorer 5.5
															</td>
														</tr>
														<tr class="gradeA">
															<td>Trident</td>
															<td>Internet
																Explorer 6
															</td>
														</tr>
														<tr class="gradeA">
															<td>Trident</td>
															<td>Internet Explorer 7</td>
														</tr>
														<tr class="gradeA">
															<td>Trident</td>
															<td>AOL browser (AOL desktop)</td>
														</tr>
														<tr class="gradeA">
															<td>Gecko</td>
															<td>Firefox 1.0</td>
														</tr>
														<tr class="gradeA">
															<td>Gecko</td>
															<td>Firefox 1.5</td>
														</tr>
														<tr class="gradeA">
															<td>Gecko</td>
															<td>Firefox 2.0</td>
														</tr>
														<tr class="gradeA">
															<td>Gecko</td>
															<td>Firefox 3.0</td>
														</tr>
														<tr class="gradeA">
															<td>Gecko</td>
															<td>Camino 1.0</td>
														</tr>
														<tr class="gradeA">
															<td>Gecko</td>
															<td>Camino 1.5</td>
														</tr>
														<tr class="gradeA">
															<td>Gecko</td>
															<td>Netscape 7.2</td>
														</tr>
														<tr class="gradeA">
															<td>Gecko</td>
															<td>Netscape Browser 8</td>
														</tr>
														<tr class="gradeA">
															<td>Gecko</td>
															<td>Netscape Navigator 9</td>
														</tr>
														<tr class="gradeA">
															<td>Gecko</td>
															<td>Mozilla 1.0</td>
														</tr>
														<tr class="gradeA">
															<td>Gecko</td>
															<td>Mozilla 1.1</td>
														</tr>
														<tr class="gradeA">
															<td>Gecko</td>
															<td>Mozilla 1.2</td>
														</tr>
														<tr class="gradeA">
															<td>Gecko</td>
															<td>Mozilla 1.3</td>
														</tr>
														<tr class="gradeA">
															<td>Gecko</td>
															<td>Mozilla 1.4</td>
														</tr>
														<tr class="gradeA">
															<td>Gecko</td>
															<td>Mozilla 1.5</td>
														</tr>
														<tr class="gradeA">
															<td>Gecko</td>
															<td>Mozilla 1.6</td>
														</tr>
														<tr class="gradeA">
															<td>Gecko</td>
															<td>Mozilla 1.7</td>
														</tr>
														<tr class="gradeA">
															<td>Gecko</td>
															<td>Mozilla 1.8</td>
														</tr>
														<tr class="gradeA">
															<td>Gecko</td>
															<td>Seamonkey 1.1</td>
														</tr>
														<tr class="gradeA">
															<td>Gecko</td>
															<td>Epiphany 2.20</td>
														</tr>
														<tr class="gradeA">
															<td>Webkit</td>
															<td>Safari 1.2</td>
														</tr>
														<tr class="gradeA">
															<td>Webkit</td>
															<td>Safari 1.3</td>
														</tr>
														<tr class="gradeA">
															<td>Webkit</td>
															<td>Safari 2.0</td>
														</tr>
														<tr class="gradeA">
															<td>Webkit</td>
															<td>Safari 3.0</td>
														</tr>
														<tr class="gradeA">
															<td>Webkit</td>
															<td>OmniWeb 5.5</td>
														</tr>
														<tr class="gradeA">
															<td>Webkit</td>
															<td>iPod Touch / iPhone</td>
														</tr>
														<tr class="gradeA">
															<td>Webkit</td>
															<td>S60</td>
														</tr>
														<tr class="gradeA">
															<td>Presto</td>
															<td>Opera 7.0</td>
														</tr>
														<tr class="gradeA">
															<td>Presto</td>
															<td>Opera 7.5</td>
														</tr>
														<tr class="gradeA">
															<td>Presto</td>
															<td>Opera 8.0</td>
														</tr>
														<tr class="gradeA">
															<td>Presto</td>
															<td>Opera 8.5</td>
														</tr>
														<tr class="gradeA">
															<td>Presto</td>
															<td>Opera 9.0</td>

														</tr>
														<tr class="gradeA">
															<td>Presto</td>
															<td>Opera 9.2</td>
														</tr>
														<tr class="gradeA">
															<td>Presto</td>
															<td>Opera 9.5</td>
														</tr>
														<tr class="gradeA">
															<td>Presto</td>
															<td>Opera for Wii</td>
														</tr>
														<tr class="gradeA">
															<td>Presto</td>
															<td>Nokia N800</td>
														</tr>
														<tr class="gradeA">
															<td>Presto</td>
															<td>Nintendo DS browser</td>
														</tr>
														<tr class="gradeC">
															<td>KHTML</td>
															<td>Konqureror 3.1</td>
														</tr>
														<tr class="gradeA">
															<td>KHTML</td>
															<td>Konqureror 3.3</td>
														</tr>
														<tr class="gradeA">
															<td>KHTML</td>
															<td>Konqureror 3.5</td>
														</tr>
														<tr class="gradeX">
															<td>Tasman</td>
															<td>Internet Explorer 4.5</td>
														</tr>
														<tr class="gradeC">
															<td>Tasman</td>
															<td>Internet Explorer 5.1</td>
														</tr>
														<tr class="gradeC">
															<td>Tasman</td>
															<td>Internet Explorer 5.2</td>
														</tr>
														<tr class="gradeA">
															<td>Misc</td>
															<td>NetFront 3.1</td>
														</tr>
														<tr class="gradeA">
															<td>Misc</td>
															<td>NetFront 3.4</td>
														</tr>
														<tr class="gradeX">
															<td>Misc</td>
															<td>Dillo 0.8</td>
														</tr>
														<tr class="gradeX">
															<td>Misc</td>
															<td>Links</td>
														</tr>
														<tr class="gradeX">
															<td>Misc</td>
															<td>Lynx</td>
														</tr>
														<tr class="gradeC">
															<td>Misc</td>
															<td>IE Mobile</td>
														</tr>
														<tr class="gradeC">
															<td>Misc</td>
															<td>PSP browser</td>
														</tr>
														<tr class="gradeU">
															<td>Other browsers</td>
															<td>All others</td>
														</tr>
														-->
												</tbody>
												<!--
													<tfoot>
													<tr>
														<th>Rendering engine</th>
														<th>Browser</th>
													</tr>
													</tfoot>
													-->
											</table>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- Footer block -->
				{require "../../~section/footer.html"}
				<!-- End Footer block -->
			</div>
		</div>
		<!-- Mainly scripts -->
		<script src="../../js/jquery-2.1.1.js"></script>
		<script src="../../js/bootstrap.min.js"></script>
		<script src="../../js/plugins/metisMenu/jquery.metisMenu.js"></script>
		<script src="../../js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
		<!-- Toastr script -->
		<script src="../../js/plugins/toastr/toastr.min.js"></script>
		<!-- Custom and plugin javascript -->
		<script src="../../js/inspinia.js"></script>
		<script src="../../js/plugins/pace/pace.min.js"></script>
		<script>
		  $(document).ready(function()
		  {
				$('.file-box').each(function() {
					animationHover(this, 'pulse');
				});

				$('.btn-delete-collection').click(function() {

					var dlink = $(this).data('link');
					var head  = $(this).data('head');

					if (confirm(`Удалить коллекцию "${head}" со всем содержимым?`))
					{

						alert(dlink);
					}

				});
		  });

		  function importObjects()
		  {
			var input = document.createElement('input');
			input.type = 'file';
			input.name = 'objects';

			input.onchange = e =>
			{

				 // getting a hold of the file reference
				 var file = e.target.files[0];

				 // setting up the reader
				 var reader = new FileReader();
				 reader.readAsDataURL(file); // this is reading as data url

				//~ reader.onload = function ()
				//~ {
					//~ strEncoded = reader.result;
					//~ console.log( window.atob( strEncoded ));
				//~ };


				//~ // here we tell the reader what to do when it done reading...
				reader.onload = readerEvent =>
				{
					var content = readerEvent.target.result; // this is the content!
					content = atob(content.substring(29));
					toastr.info("Импортирую...");

					$.ajax({
						url: "admin/constructor/object/import",
						method: "POST",
						data: { jsonData: content }
					}).done(function(data)
					{
						if (data == "OK")
						{
							toastr.success(data);
							location.reload(); // window.location.reload()
						}
						else
						{
							toastr.warning(data);
						}
						console.log(data);
					});
				}

			}

			input.click();
		}
		</script>
	</body>
</html>
